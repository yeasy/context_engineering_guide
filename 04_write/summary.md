## 本章小结

本章深入探讨了上下文工程的写入策略，涵盖外部存储、记忆架构、知识库构建和向量数据库实践。

### 关键概念清单

| 概念 | 定义 |
|------|------|
| 外部存储 | 上下文窗口之外的持久化存储系统 |
| 记忆架构 | 多层次的记忆组织结构，包含工作记忆、短期记忆、长期记忆 |
| 语义记忆 | 存储抽象事实和概念的长期记忆类型 |
| 情景记忆 | 存储具体事件和经历的长期记忆类型 |
| 知识库 | 组织化的信息集合，用于为 AI 提供领域知识 |
| 向量数据库 | 专门优化用于存储和检索高维向量的数据库 |

### 核心观点

1. **外部存储是必需的**：上下文窗口有限，复杂应用需要外部存储支持持久记忆和大规模知识

2. **记忆架构应分层设计**：
   - 工作记忆：上下文窗口
   - 短期记忆：会话级别
   - 长期记忆：跨会话持久化

3. **知识库构建是系统工程**：
   - 数据收集 → 处理 → 向量化 → 质量验证
   - 需要持续维护更新

4. **向量数据库是语义检索的核心**：
   - 选择合适的嵌入模型和索引算法
   - 优化分块策略和检索流程

### 常见误区

- **误区一**：直接用传统数据库存储知识  
  **正解**：语义检索需要向量数据库支持

- **误区二**：知识库越大越好  
  **正解**：质量比数量更重要，噪声会降低效果

- **误区三**：向量数据库可以替代其他存储  
  **正解**：不同类型数据需要不同存储方案

- **误区四**：构建一次就完成了  
  **正解**：知识库需要持续维护和更新

### 实践建议

1. **从简单开始**：先用简单方案验证可行性，再逐步优化

2. **关注分块质量**：分块策略对检索效果影响巨大

3. **选择合适工具**：根据规模和需求选择向量数据库

4. **建立评估机制**：持续监控检索质量和系统性能

5. **规划维护流程**：设计知识库的更新和维护机制

### 预告

下一章将讨论选择策略——如何从存储的大量信息中精准检索当前任务所需的内容。这是 [RAG](../05_select/5.1_rag_principles.md) 系统的核心技术。
